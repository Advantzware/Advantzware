<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
  <meta name="generator" content="HtmlDict.w version 11">
  <meta name="author"    content="Patrick Tingen [patrick at tingen dot nl]">
  <link rel="stylesheet" title="Default" type="text/css" href="../../default.css">
  <link rel="alternate stylesheet" title="blue" type="text/css" href="../../blue.css">
  <link rel="alternate stylesheet" title="default" type="text/css" href="../../default.css">
  <link rel="alternate stylesheet" title="green" type="text/css" href="../../green.css">
  <link rel="alternate stylesheet" title="oldstyle" type="text/css" href="../../oldstyle.css">
  <link rel="alternate stylesheet" title="red" type="text/css" href="../../red.css">
  <link rel="shortcut icon" href="../../htmldict.ico">
  <link rel="stylesheet" media="print" type="text/css" href="../../print.css">
  <script src="../../swapstyle.js"    type="text/javascript"></script>
  <script src="../../stylechooser.js" type="text/javascript"></script>
  <script src="../../dbchooser.js"    type="text/javascript"></script>
  <script src="../../htmldict.js"     type="text/javascript"></script>
  <title> Trigger code: create of itemfg</title>
</head>
<body onload="useStyleAgain('HtmlDict');" onunload="rememberStyle('HtmlDict',10);">
<div><a name="top"></a></div>
<table style="width:100%;">
  <tr>
    <td class="navbar" style="width:80%;"><a href="../../../00-index.html"target="_top">DB</a>
 | <a href="../../00-area.html"target="main">Areas</a>
 | <a href="../../00-cross.html"target="main">X-idx</a>
 | <a href="../../00-main.html"target="main">Tables</a>
 | <a href="../../00-sequences.html"target="main">Sequences</a>
</td>
    <td class="navbar" style="width:20%; text-align:right;"><a href="../../htmldict.html"target="_top">HtmlDict 11</a></td>
  </tr>
</table>
 
<h1>Trigger code: create of itemfg</h1>
<div class="progressCode">
<span class="src-prep">&amp;Scoped-define</span><!--src-prep--> TABLENAME itemfg
 
<span class="src-keyword">TRIGGER PROCEDURE FOR CREATE OF</span><!--src-keyword--> <span class="src-prep">{&amp;TABLENAME}</span><!--src-prep-->.
 
<span class="src-prep">{methods/<span class="src-keyword">triggers</span><!--src-keyword-->/<span class="src-keyword">create</span><!--src-keyword-->.i}</span><!--src-prep-->
 
<span class="src-keyword">DEFINE BUFFER</span><!--src-keyword--> b-<span class="src-prep">{&amp;TABLENAME}</span><!--src-prep--> <span class="src-keyword">FOR</span><!--src-keyword--> <span class="src-prep">{&amp;TABLENAME}</span><!--src-prep-->.
<span class="src-keyword">DEFINE BUFFER</span><!--src-keyword--> fg-status      <span class="src-keyword">FOR</span><!--src-keyword--> reftable.
<span class="src-keyword">DEFINE BUFFER</span><!--src-keyword--> b-fg-status    <span class="src-keyword">FOR</span><!--src-keyword--> reftable.
 
<span class="src-prep">{custom/globdefs.i}</span><!--src-prep-->
 
<span class="src-prep">{sys/inc/<span class="src-keyword">var</span><!--src-keyword-->.i <span class="src-keyword">NEW</span><!--src-keyword--> SHARED}</span><!--src-p<span class="src-keyword">SHARED</span><!--src-keyword-->
 
cocode = g_company.
 
<span class="src-keyword">FIND FIRST</span><!--src-keyword--> company <span class="src-keyword">NO-LOCK</span><!--src-keyword-->
     <span class="src-keyword">WHERE</span><!--src-keyword--> company.company <span class="src-keyword">EQ</span><!--src-keyword--> cocode
     <span class="src-keyword">NO-ERROR</span><!--src-keyword-->.
 
<span class="src-keyword">FIND FIRST</span><!--src-keyword--> fg-bin <span class="src-keyword">NO-LOCK</span><!--src-keyword-->
     <span class="src-keyword">WHERE</span><!--src-keyword--> fg-bin.company <span class="src-keyword">EQ</span><!--src-keyword--> cocode
       <span class="src-keyword">AND</span><!--src-keyword--> fg-bin.i-no    <span class="src-keyword">EQ</span><!--src-keyword--> <span class="src-char">""</span><!--src-char-->
       <span class="src-keyword">AND</span><!--src-keyword--> fg-bin.loc     <span class="src-keyword">EQ</span><!--src-keyword--> g_loc
     <span class="src-keyword">USE-INDEX</span><!--src-keyword--> co-ino
     <span class="src-keyword">NO-ERROR</span><!--src-keyword-->.
 
<span class="src-keyword">FIND FIRST</span><!--src-keyword--> fgcat
    <span class="src-keyword">WHERE</span><!--src-keyword--> fgcat.company <span class="src-keyword">EQ</span><!--src-keyword--> g_company
    <span class="src-keyword">USE-INDEX</span><!--src-keyword--> fgcat <span class="src-keyword">NO-LOCK</span><!--src-keyword-->
    <span class="src-keyword">NO-ERROR</span><!--src-keyword-->.
 
<span class="src-keyword">FIND FIRST</span><!--src-keyword--> oe-ctrl <span class="src-keyword">NO-LOCK</span><!--src-keyword--> 
    <span class="src-keyword">WHERE</span><!--src-keyword--> oe-ctrl.company <span class="src-keyword">EQ</span><!--src-keyword--> g_company 
    <span class="src-keyword">NO-ERROR</span><!--src-keyword-->.
 
<span class="src-keyword">FIND FIRST</span><!--src-keyword--> cust <span class="src-keyword">NO-LOCK</span><!--src-keyword-->
    <span class="src-keyword">WHERE</span><!--src-keyword--> cust.company <span class="src-keyword">EQ</span><!--src-keyword--> g_company
      <span class="src-keyword">AND</span><!--src-keyword--> cust.<span class="src-keyword">active  EQ</span><!--src-keyword--> <span class="src-char">"X"</span><!--src-char-->
      <span class="src-keyword">NO-ERROR</span><!--src-keyword-->.
<span class="src-keyword">IF AVAILABLE</span><!--src-keyword--> cust <span class="src-keyword">THEN</span><!--src-keyword--> 
<span class="src-prep">{&amp;TABLENAME}</span><!--src-prep-->.cust-no = cust.cust-no.
 
<span class="src-keyword">ASSIGN</span><!--src-keyword-->
    <span class="src-prep">{&amp;TABLENAME}</span><!--src-prep-->.company      = g_company
    <span class="src-prep">{&amp;TABLENAME}</span><!--src-prep-->.loc          = g_loc
    <span class="src-prep">{&amp;TABLENAME}</span><!--src-prep-->.def-loc      = g_loc
    <span class="src-prep">{&amp;TABLENAME}</span><!--src-prep-->.def-loc-bin  = <span class="src-keyword">IF AVAILABLE</span><!--src-keyword--> fg-bin <span class="src-keyword">THEN</span><!--src-keyword--> fg-bin.loc-bin <span class="src-keyword">ELSE</span><!--src-keyword--> <span class="src-char">""</span><!--src-char-->
    <span class="src-prep">{&amp;TABLENAME}</span><!--src-prep-->.procat       = <span class="src-keyword">IF AVAILABLE</span><!--src-keyword--> fgcat <span class="src-keyword">THEN</span><!--src-keyword--> fgcat.procat <span class="src-keyword">ELSE</span><!--src-keyword--> <span class="src-char">""</span><!--src-char-->
    <span class="src-prep">{&amp;TABLENAME}</span><!--src-prep-->.pur-man      = <span class="src-keyword">NO</span><!--src-keyword-->
    <span class="src-prep">{&amp;TABLENAME}</span><!--src-prep-->.i-code       = <span class="src-char">"S"</span><!--src-char--> 
    <span class="src-prep">{&amp;TABLENAME}</span><!--src-prep-->.curr-code[1] = <span class="src-keyword">IF AVAILABLE</span><!--src-keyword--> company <span class="src-keyword">THEN</span><!--src-keyword--> company.curr-code <span class="src-keyword">ELSE</span><!--src-keyword--> <span class="src-char">"USD"</span><!--src-char-->
    <span class="src-prep">{&amp;TABLENAME}</span><!--src-prep-->.i-no         = <span class="src-char">"               "</span><!--src-char--> + <span class="src-prep">{&amp;TABLENAME}</span><!--src-prep-->.rec_key
    <span class="src-prep">{&amp;TABLENAME}</span><!--src-prep-->.prod-uom     = <span class="src-char">"M"</span><!--src-char-->
    <span class="src-prep">{&amp;TABLENAME}</span><!--src-prep-->.pur-uom      = <span class="src-char">"M"</span><!--src-char-->
    <span class="src-prep">{&amp;TABLENAME}</span><!--src-prep-->.sell-uom     = <span class="src-char">"M"</span><!--src-char-->
    <span class="src-prep">{&amp;TABLENAME}</span><!--src-prep-->.stat         = <span class="src-char">"A"</span><!--src-char-->
    <span class="src-prep">{&amp;TABLENAME}</span><!--src-prep-->.exempt-disc  = <span class="src-keyword">NO</span><!--src-keyword-->
    <span class="src-prep">{&amp;TABLENAME}</span><!--src-prep-->.setupDate    = <span class="src-keyword">TODAY</span><!--src-keyword-->
    <span class="src-prep">{&amp;TABLENAME}</span><!--src-prep-->.setupBy      = <span class="src-keyword">USERID</span><!--src-keyword-->(<span class="src-keyword">LDBNAME</span><!--src-keyword-->(<span class="src-number">1</span><!--src-number-->))
    <span class="src-prep">{&amp;TABLENAME}</span><!--src-prep-->.stackHeight  = <span class="src-number">1</span><!--src-number-->
    .
 
<span class="src-keyword">IF</span><!--src-keyword--> <span class="src-prep">{&amp;TABLENAME}</span><!--src-prep-->.def-loc     <span class="src-keyword">EQ</span><!--src-keyword--> <span class="src-char">""</span><!--src-char--> <span class="src-keyword">AND</span><!--src-keyword-->
   <span class="src-prep">{&amp;TABLENAME}</span><!--src-prep-->.def-loc-bin <span class="src-keyword">EQ</span><!--src-keyword--> <span class="src-char">""</span><!--src-char--> <span class="src-keyword">THEN</span><!--src-keyword--> 
<span class="src-keyword">DO</span><!--src-keyword-->:
    <span class="src-keyword">FIND FIRST</span><!--src-keyword--> cust <span class="src-keyword">NO-LOCK</span><!--src-keyword-->
         <span class="src-keyword">WHERE</span><!--src-keyword--> cust.company <span class="src-keyword">EQ</span><!--src-keyword--> cocode
           <span class="src-keyword">AND</span><!--src-keyword--> cust.<span class="src-keyword">active  EQ</span><!--src-keyword--> <span class="src-char">"X"</span><!--src-char-->
         <span class="src-keyword">NO-ERROR</span><!--src-keyword-->.
    <span class="src-keyword">IF AVAILABLE</span><!--src-keyword--> cust <span class="src-keyword">THEN</span><!--src-keyword-->
    <span class="src-keyword">FIND FIRST</span><!--src-keyword--> shipto <span class="src-keyword">OF</span><!--src-keyword--> cust <span class="src-keyword">NO-LOCK NO-ERROR</span><!--src-keyword-->.
    <span class="src-keyword">IF AVAILABLE</span><!--src-keyword--> shipto <span class="src-keyword">THEN</span><!--src-keyword-->
    <span class="src-keyword">ASSIGN</span><!--src-keyword-->
        <span class="src-prep">{&amp;TABLENAME}</span><!--src-prep-->.def-loc     = <span class="src-keyword">CAPS</span><!--src-keyword-->(shipto.loc)
        <span class="src-prep">{&amp;TABLENAME}</span><!--src-prep-->.def-loc-bin = <span class="src-keyword">CAPS</span><!--src-keyword-->(shipto.loc-bin)
        .
<span class="src-keyword">END</span><!--src-keyword-->.
 
<span class="src-prep">{sys/inc/fgmaster.i}</span><!--src-prep-->
 
<span class="src-keyword">IF</span><!--src-keyword--> fgmaster-cha <span class="src-keyword">NE</span><!--src-keyword--> <span class="src-char">"FGITEM"</span><!--src-char--> <span class="src-keyword">THEN</span><!--src-keyword-->
    <span class="src-keyword">FIND FIRST</span><!--src-keyword--> b-<span class="src-prep">{&amp;TABLENAME}</span><!--src-prep--> <span class="src-keyword">NO-LOCK</span><!--src-keyword-->
         <span class="src-keyword">WHERE</span><!--src-keyword--> b-<span class="src-prep">{&amp;TABLENAME}</span><!--src-prep-->.company <span class="src-keyword">EQ</span><!--src-keyword--> cocode
           <span class="src-keyword">AND</span><!--src-keyword--> b-<span class="src-prep">{&amp;TABLENAME}</span><!--src-prep-->.i-no    <span class="src-keyword">EQ</span><!--src-keyword--> fgmaster-cha
         <span class="src-keyword">NO-ERROR</span><!--src-keyword-->.
<span class="src-keyword">IF AVAILABLE</span><!--src-keyword--> b-<span class="src-prep">{&amp;TABLENAME}</span><!--src-prep--> <span class="src-keyword">THEN DO</span><!--src-keyword-->:
    <span class="src-keyword">ASSIGN</span><!--src-keyword-->
        <span class="src-prep">{&amp;TABLENAME}</span><!--src-prep-->.procat         = b-<span class="src-prep">{&amp;TABLENAME}</span><!--src-prep-->.procat
        <span class="src-prep">{&amp;TABLENAME}</span><!--src-prep-->.<span class="src-keyword">class</span><!--src-keyword-->          = b-<span class="src-prep">{&amp;TABLENAME}</span><!--src-prep-->.<span class="src-keyword">class</span><!--src-keyword-->
        <span class="src-prep">{&amp;TABLENAME}</span><!--src-prep-->.sell-uom       = b-<span class="src-prep">{&amp;TABLENAME}</span><!--src-prep-->.sell-uom
        <span class="src-prep">{&amp;TABLENAME}</span><!--src-prep-->.prod-uom       = b-<span class="src-prep">{&amp;TABLENAME}</span><!--src-prep-->.prod-uom
        <span class="src-prep">{&amp;TABLENAME}</span><!--src-prep-->.pur-uom        = b-<span class="src-prep">{&amp;TABLENAME}</span><!--src-prep-->.pur-uom
        <span class="src-prep">{&amp;TABLENAME}</span><!--src-prep-->.curr-code[1]   = b-<span class="src-prep">{&amp;TABLENAME}</span><!--src-prep-->.curr-code[1]
        <span class="src-prep">{&amp;TABLENAME}</span><!--src-prep-->.def-loc        = b-<span class="src-prep">{&amp;TABLENAME}</span><!--src-prep-->.def-loc
        <span class="src-prep">{&amp;TABLENAME}</span><!--src-prep-->.def-loc-bin    = b-<span class="src-prep">{&amp;TABLENAME}</span><!--src-prep-->.def-loc-bin
        <span class="src-prep">{&amp;TABLENAME}</span><!--src-prep-->.pur-man        = b-<span class="src-prep">{&amp;TABLENAME}</span><!--src-prep-->.pur-man
        <span class="src-prep">{&amp;TABLENAME}</span><!--src-prep-->.i-code         = b-<span class="src-prep">{&amp;TABLENAME}</span><!--src-prep-->.i-code
        <span class="src-prep">{&amp;TABLENAME}</span><!--src-prep-->.stocked        = b-<span class="src-prep">{&amp;TABLENAME}</span><!--src-prep-->.stocked
        <span class="src-prep">{&amp;TABLENAME}</span><!--src-prep-->.cc-code        = b-<span class="src-prep">{&amp;TABLENAME}</span><!--src-prep-->.cc-code
        <span class="src-prep">{&amp;TABLENAME}</span><!--src-prep-->.prod-code      = b-<span class="src-prep">{&amp;TABLENAME}</span><!--src-prep-->.prod-code
        <span class="src-prep">{&amp;TABLENAME}</span><!--src-prep-->.taxable        = b-<span class="src-prep">{&amp;TABLENAME}</span><!--src-prep-->.taxable
        <span class="src-prep">{&amp;TABLENAME}</span><!--src-prep-->.frt-class      = b-<span class="src-prep">{&amp;TABLENAME}</span><!--src-prep-->.frt-class
        <span class="src-prep">{&amp;TABLENAME}</span><!--src-prep-->.frt-class-dscr = b-<span class="src-prep">{&amp;TABLENAME}</span><!--src-prep-->.frt-class
        <span class="src-prep">{&amp;TABLENAME}</span><!--src-prep-->.vend-no        = b-<span class="src-prep">{&amp;TABLENAME}</span><!--src-prep-->.vend-no
        <span class="src-prep">{&amp;TABLENAME}</span><!--src-prep-->.vend2-no       = b-<span class="src-prep">{&amp;TABLENAME}</span><!--src-prep-->.vend2-no
        <span class="src-prep">{&amp;TABLENAME}</span><!--src-prep-->.ord-policy     = b-<span class="src-prep">{&amp;TABLENAME}</span><!--src-prep-->.ord-policy
        <span class="src-prep">{&amp;TABLENAME}</span><!--src-prep-->.alloc          = b-<span class="src-prep">{&amp;TABLENAME}</span><!--src-prep-->.alloc
        <span class="src-prep">{&amp;TABLENAME}</span><!--src-prep-->.stat           = b-<span class="src-prep">{&amp;TABLENAME}</span><!--src-prep-->.stat
        <span class="src-prep">{&amp;TABLENAME}</span><!--src-prep-->.ship-meth      = b-<span class="src-prep">{&amp;TABLENAME}</span><!--src-prep-->.ship-meth
        .
    <span class="src-keyword">IF</span><!--src-keyword--> b-<span class="src-prep">{&amp;TABLENAME}</span><!--src-prep-->.cust-no <span class="src-keyword">NE</span><!--src-keyword--> <span class="src-char">""</span><!--src-char--> <span class="src-keyword">THEN</span><!--src-keyword-->
    <span class="src-prep">{&amp;TABLENAME}</span><!--src-prep-->.cust-no = b-<span class="src-prep">{&amp;TABLENAME}</span><!--src-prep-->.cust-no. 
<span class="src-keyword">END</span><!--src-keyword-->.
</div><!--progresscode-->
</body>
</html>
