<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
  <meta name="generator" content="HtmlDict.w version 11">
  <meta name="author"    content="Patrick Tingen [patrick at tingen dot nl]">
  <link rel="stylesheet" title="Default" type="text/css" href="../../default.css">
  <link rel="alternate stylesheet" title="blue" type="text/css" href="../../blue.css">
  <link rel="alternate stylesheet" title="default" type="text/css" href="../../default.css">
  <link rel="alternate stylesheet" title="green" type="text/css" href="../../green.css">
  <link rel="alternate stylesheet" title="oldstyle" type="text/css" href="../../oldstyle.css">
  <link rel="alternate stylesheet" title="red" type="text/css" href="../../red.css">
  <link rel="shortcut icon" href="../../htmldict.ico">
  <link rel="stylesheet" media="print" type="text/css" href="../../print.css">
  <script src="../../swapstyle.js"    type="text/javascript"></script>
  <script src="../../stylechooser.js" type="text/javascript"></script>
  <script src="../../dbchooser.js"    type="text/javascript"></script>
  <script src="../../htmldict.js"     type="text/javascript"></script>
  <title> Trigger code: delete of wiptag</title>
</head>
<body onload="useStyleAgain('HtmlDict');" onunload="rememberStyle('HtmlDict',10);">
<div><a name="top"></a></div>
<table style="width:100%;">
  <tr>
    <td class="navbar" style="width:80%;"><a href="../../../00-index.html"target="_top">DB</a>
 | <a href="../../00-area.html"target="main">Areas</a>
 | <a href="../../00-cross.html"target="main">X-idx</a>
 | <a href="../../00-main.html"target="main">Tables</a>
 | <a href="../../00-sequences.html"target="main">Sequences</a>
</td>
    <td class="navbar" style="width:20%; text-align:right;"><a href="../../htmldict.html"target="_top">HtmlDict 11</a></td>
  </tr>
</table>
 
<h1>Trigger code: delete of wiptag</h1>
<div class="progressCode">
<span class="src-prep">&amp;Scoped-define</span><!--src-prep--> ACTION <span class="src-keyword">DELETE</span><!--src-keyword-->
<span class="src-prep">&amp;Scoped-define</span><!--src-prep--> <span class="src-keyword">DBNAME</span><!--src-keyword--> ASI
<span class="src-prep">&amp;Scoped-define</span><!--src-prep--> TABLENAME wiptag
 
<span class="src-keyword">TRIGGER PROCEDURE FOR DELETE OF</span><!--src-keyword--> <span class="src-prep">{&amp;TABLENAME}</span><!--src-prep-->.
<span class="src-prep">{custom/globdefs.i}</span><!--src-prep-->
 
<span class="src-comment">/*need to have similar logic here?*/</span><!--src-comment-->
 
<span class="src-comment">/*
IF NOT loadtag.item-type  THEN DO:
   FIND FIRST fg-bin WHERE fg-bin.company EQ g_company 
                    AND fg-bin.i-no    EQ loadtag.i-no
                    /*AND fg-bin.loc     EQ loadtag.loc
                      AND fg-bin.loc-bin EQ loadtag.loc-bin*/
                      AND fg-bin.tag     EQ loadtag.tag-no
                      /*AND fg-bin.job-no = loadtag.job-no
                      AND fg-bin.job-no2 = loadtag.job-no2*/
                      NO-LOCK NO-ERROR.
   IF AVAIL fg-bin THEN do:
      MESSAGE "Can't Delete. Inventory exists for the tag." VIEW-AS ALERT-BOX ERROR.
      RETURN ERROR.
   END.
   FIND FIRST fg-rctd WHERE fg-rctd.company = g_company
                        AND fg-rctd.tag = loadtag.tag-no
                        AND fg-rctd.i-no = loadtag.i-no
                        AND fg-rctd.rita-code &lt;&gt; "P"
                        NO-LOCK NO-ERROR.
   IF AVAIL fg-rctd THEN do:
      MESSAGE "Can't Delete. Not Posted FG Warehouse Transactions exist." VIEW-AS ALERT-BOX ERROR.
      RETURN ERROR.
   END.
END. */</span><!--src-comment-->
 
<span class="src-prep">{methods/<span class="src-keyword">triggers</span><!--src-keyword-->/<span class="src-keyword">delete</span><!--src-keyword-->.i}</span><!--src-prep-->
 
 <span class="src-keyword">FOR EACH</span><!--src-keyword--> wiptag-mch <span class="src-keyword">WHERE</span><!--src-keyword-->
     wiptag-mch.company <span class="src-keyword">EQ</span><!--src-keyword--> wiptag.company <span class="src-keyword">AND</span><!--src-keyword-->
     wiptag-mch.tag-no  <span class="src-keyword">EQ</span><!--src-keyword--> wiptag.tag-no:
 
     <span class="src-keyword">DELETE</span><!--src-keyword--> wiptag-mch.
 <span class="src-keyword">END</span><!--src-keyword-->.
 
<span class="src-keyword">FIND FIRST</span><!--src-keyword--> reftable <span class="src-keyword">WHERE</span><!--src-keyword-->
     reftable.reftable = <span class="src-char">"WIPLEN"</span><!--src-char--> <span class="src-keyword">AND</span><!--src-keyword-->
     reftable.company = wiptag.company <span class="src-keyword">AND</span><!--src-keyword-->
     reftable.<span class="src-keyword">CODE</span><!--src-keyword--> = wiptag.tag-no
     <span class="src-keyword">USE-INDEX CODE</span><!--src-keyword-->
     <span class="src-keyword">NO-ERROR</span><!--src-keyword-->.
 
<span class="src-keyword">IF AVAIL</span><!--src-keyword--> reftable <span class="src-keyword">THEN</span><!--src-keyword-->
   <span class="src-keyword">DELETE</span><!--src-keyword--> reftable.
</div><!--progresscode-->
</body>
</html>
